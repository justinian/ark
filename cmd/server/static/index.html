<html>
<head>

    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/bootswatch@5/dist/yeti/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/v/bs5/jq-3.3.1/dt-1.10.25/sb-1.1.0/sl-1.3.3/datatables.min.css"/>

    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript"
        src="https://cdn.datatables.net/v/bs5/jq-3.3.1/dt-1.10.25/sb-1.1.0/sl-1.3.3/datatables.min.js"></script>

    <script type="text/javascript" src="colors.js"></script>
    <script type="text/javascript" src="main.js"></script>

    <script type="text/javascript">
        $(document).ready( function () {
            table = $('#dinos').DataTable(tableOptions);

            table.searchBuilder.container().prependTo( $('#searchBuilderDiv') );
            $( '#searchInput' ).on( 'keyup', function () {
                table.search( this.value ).draw();
            } );

            $( '#showBase' ).on( 'click', showStats );
            $( '#showTamed' ).on( 'click', showStats );
            $( '#showTotal' ).on( 'click', showStats );
            $( '#showCurrent' ).on( 'click', showStats );
            $( '#showColor' ).on( 'click', showStats );

            table.on( "select", function () {
                row = table.row({"selected":true}).data();
                if (row.name) {
                    $( '#dinoName' ).html(row.name);
                } else {
                    $( '#dinoName' ).html("Unnamed " + row.class_name);
                }

                $( '#dinoWorldName' ).html(row.world);
                $( '#dinoId' ).html(row.dino_id);
                $( '#dinoClass' ).html(row.class_name);

                if (row.is_cryo) {
                    if (row.parent_name) {
                        $( '#dinoStored' ).html(row.parent_name);
                    } else {
                        $( '#dinoStored' ).html(row.parent_class);
                    }
                } else {
                    $( '#dinoStored' ).html("");
                }

                for (var i = 0; i < 6; i++) {
                    var id = "#dinoColor" + i;
                    var color = row["color" + i];
                    if (color >= 0) {
                        c = colors[color];
                    } else {
                        c = dyes[color+55];
                    }
                    if (c === undefined || c === null) {
                        $( id ).css("background-color", "");
                        $( id ).css("border", "");
                    } else {
                        $( id ).css("background-color", c.color);
                        $( id ).css("border", "1px solid black");
                    }
                }

                var canvas = document.getElementById("dinoWorldMap");
                drawMap(canvas, row.world, row.x, row.y);
            });
        });
    </script>

    <style>
    .swatch {
        float: left;
        height: 18px;
        width: 18px;
        margin-right: 10px;
        border: 1px solid black;
    }

    .dinoInfo {
        font-size: smaller;
    }
    </style>
</head>
<body>

<div class="container-fluid p-4">
    <div class="row gx-5">

        <div class="col-8 rounded-3 m-3 p-1 bg-light">
            <table id="dinos" class="table table-striped nowrap" width="100%"></table>
        </div>

        <div class="col-3 m-3 p-3">
            <div class="row">
                <div class="btn-group" width="100%" role="group">
                    <input type="radio" class="btn-check" name="show" id="showBase" autocomplete="off">
                    <label class="btn btn-outline-primary" for="showBase">Base Stats</label>

                    <input type="radio" class="btn-check" name="show" id="showTamed" autocomplete="off">
                    <label class="btn btn-outline-primary" for="showTamed">Tamed Points</label>

                    <input type="radio" class="btn-check" name="show" id="showTotal" checked autocomplete="off">
                    <label class="btn btn-outline-primary" for="showTotal">Total Stats</label>

                    <input type="radio" class="btn-check" name="show" id="showCurrent" autocomplete="off">
                    <label class="btn btn-outline-primary" for="showCurrent">Current Stats</label>

                    <input type="radio" class="btn-check" name="show" id="showColor" autocomplete="off">
                    <label class="btn btn-outline-primary" for="showColor">Colors</label>
                </div>
            </div>

            <div class="row my-2 p-2">
                <input type="text" class="form-control" id="searchInput" placeholder="Search">
            </div>

            <div class="row my-2 p-2 rounded bg-light" id="searchBuilderDiv">
            </div>

            <div class="row my-2 p-2 rounded bg-light" id="dinoInfo">
                <h3 id="dinoName">No Selection</h3>

                <div class="p-3">
                <table width="100%" class="dinoInfo table">
                    <tr>
                        <th>World</th>
                        <td id="dinoWorldName"></td>
                    </tr>

                    <tr>
                        <th>Class</th>
                        <td id="dinoClass"></td>
                    </tr>

                    <tr>
                        <th>Dino ID</th>
                        <td id="dinoId"></td>
                    </tr>

                    <tr>
                        <th>Stored In</th>
                        <td id="dinoStored"></td>
                    </tr>

                </table>
                </div>

                <div class="p-3">
                    <table width="100%">
                    <tr>
                        <th>0</th>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                        <th>5</th>
                    </tr>
                    <tr>
                        <td id="dinoColor0">&nbsp;</td>
                        <td id="dinoColor1">&nbsp;</td>
                        <td id="dinoColor2">&nbsp;</td>
                        <td id="dinoColor3">&nbsp;</td>
                        <td id="dinoColor4">&nbsp;</td>
                        <td id="dinoColor5">&nbsp;</td>
                    </tr>

                <canvas id="dinoWorldMap"></canvas>
            </div>
        </div>

    </div>
</div>

</body>
</html>
